<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; connect-src 'self' ws://localhost:8765 ws://localhost:8764 http://localhost:8766"
    />
    <title>Live Hints</title>
    <link rel="stylesheet" href="styles-new.css" />
  </head>
  <body>
    <div id="app" class="app-container" data-testid="app-container">
      <!-- Header Bar -->
      <header class="header-bar" data-testid="header">
        <div class="header-left">
          <div class="logo">
            <span class="logo-icon">üí°</span>
            <span class="logo-text">Live Hints</span>
          </div>
          <span
            id="status-indicator"
            class="status-badge status-idle"
            data-testid="status-indicator"
          >
            <span class="status-dot"></span>
            <span class="status-label" data-testid="status-text">–ì–æ—Ç–æ–≤</span>
          </span>
        </div>

        <div class="header-drag-region"></div>

        <div class="header-actions">
          <button
            id="btn-toggle"
            class="btn-action btn-start"
            data-testid="btn-toggle"
            title="–°—Ç–∞—Ä—Ç/–°—Ç–æ–ø"
          >
            <span class="btn-icon">‚ñ∂</span>
            <span class="btn-label">–°—Ç–∞—Ä—Ç</span>
          </button>

          <button
            id="btn-pause"
            class="btn-action btn-pause"
            data-testid="btn-pause"
            title="–ü–∞—É–∑–∞/–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"
            disabled
          >
            <span class="btn-icon">‚è∏</span>
            <span class="btn-label">–ü–∞—É–∑–∞</span>
          </button>

          <div class="action-divider"></div>

          <button
            id="btn-ask"
            class="btn-action btn-ask"
            data-testid="btn-get-hint"
            title="–ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É (Ctrl+Enter)"
            disabled
          >
            <span class="btn-icon">üí¨</span>
            <span class="btn-label">–°–ø—Ä–æ—Å–∏—Ç—å</span>
          </button>

          <button
            id="btn-screenshot"
            class="btn-action btn-secondary-action"
            data-testid="btn-screenshot"
            title="–°–∫—Ä–∏–Ω—à–æ—Ç (Ctrl+Shift+S)"
          >
            <span class="btn-icon">üì∑</span>
            <span class="btn-label">–°–∫—Ä–∏–Ω—à–æ—Ç</span>
          </button>

          <div class="action-divider"></div>

          <button
            id="btn-settings"
            class="btn-icon-only"
            data-testid="btn-settings"
            title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ (Ctrl+,)"
          >
            <span>‚öôÔ∏è</span>
          </button>

          <button
            id="btn-history"
            class="btn-icon-only"
            data-testid="btn-history"
            title="–ò—Å—Ç–æ—Ä–∏—è —Å–µ—Å—Å–∏–π"
          >
            <span>üìã</span>
          </button>

          <button id="btn-help" class="btn-icon-only" data-testid="btn-help" title="–°–ø—Ä–∞–≤–∫–∞ (F1)">
            <span>‚ùì</span>
          </button>
        </div>

        <div class="window-controls">
          <button id="btn-minimize" class="window-btn" data-testid="btn-minimize" title="–°–≤–µ—Ä–Ω—É—Ç—å">
            ‚îÄ
          </button>
          <button
            id="btn-close"
            class="window-btn window-btn-close"
            data-testid="btn-close"
            title="–ó–∞–∫—Ä—ã—Ç—å"
          >
            ‚úï
          </button>
        </div>
      </header>

      <!-- Main Layout -->
      <div class="main-layout">
        <!-- –ö–Ω–æ–ø–∫–∞ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è sidebar –∫–æ–≥–¥–∞ –æ–Ω —Å–≤—ë—Ä–Ω—É—Ç -->
        <button
          id="btn-expand-sidebar"
          class="btn-expand-sidebar hidden"
          title="–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç (Ctrl+T)"
        >
          ‚ñ∂
        </button>

        <!-- Transcript Sidebar -->
        <aside
          id="transcript-sidebar"
          class="sidebar transcript-sidebar"
          data-testid="transcript-sidebar"
        >
          <div class="sidebar-header">
            <span class="sidebar-title">–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç</span>
            <div class="sidebar-actions">
              <button id="btn-toggle-sidebar" class="btn-mini" title="–°–∫—Ä—ã—Ç—å (Ctrl+T)">‚óÄ</button>
              <button id="btn-clear-transcript" class="btn-mini" title="–û—á–∏—Å—Ç–∏—Ç—å">‚úï</button>
            </div>
          </div>
          <div
            id="transcript-feed"
            class="sidebar-content transcript-feed"
            data-testid="transcript-feed"
          >
            <div class="empty-state">
              <span class="empty-icon">üé§</span>
              <p>–û–∂–∏–¥–∞–Ω–∏–µ —Ä–µ—á–∏...</p>
            </div>
          </div>
        </aside>

        <!-- Main Content Area -->
        <main class="content-area">
          <!-- Hints Display -->
          <div class="hints-container">
            <div class="hints-header">
              <span class="hints-title">–ü–æ–¥—Å–∫–∞–∑–∫–∏</span>
              <div class="hints-pagination" id="hints-pagination">
                <button
                  id="btn-prev-hint"
                  class="btn-pagination"
                  title="–ü—Ä–µ–¥—ã–¥—É—â–∞—è (Ctrl+[)"
                  disabled
                >
                  ‚Üê
                </button>
                <span id="hints-counter" class="pagination-counter">0 / 0</span>
                <button
                  id="btn-next-hint"
                  class="btn-pagination"
                  title="–°–ª–µ–¥—É—é—â–∞—è (Ctrl+])"
                  disabled
                >
                  ‚Üí
                </button>
              </div>
              <div class="hints-actions">
                <button id="btn-copy-hint" class="btn-mini" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å (Ctrl+C)">üìã</button>
                <button id="btn-clear-hints" class="btn-mini" title="–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ">‚úï</button>
              </div>
            </div>

            <div id="hints-feed" class="hints-feed" data-testid="hints-feed">
              <div id="hints-empty-state" class="empty-state">
                <span class="empty-icon">üí°</span>
                <h3>–ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å</h3>
                <p>–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Å—Å–∏—é –∏ –Ω–∞—á–Ω–∏—Ç–µ –≥–æ–≤–æ—Ä–∏—Ç—å.</p>
                <p class="empty-hint">AI –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –æ—Ç–≤–µ—Ç—ã</p>
              </div>

              <div id="hints-loading-state" class="loading-state hidden">
                <div class="loading-spinner"></div>
                <span class="loading-text">–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –∫–æ–Ω—Ç–µ–∫—Å—Ç...</span>
                <div class="loading-progress">
                  <div class="loading-progress-bar"></div>
                </div>
              </div>
            </div>

            <!-- Streaming Hint -->
            <div id="streaming-hint" class="streaming-hint hidden" data-testid="streaming-hint">
              <div class="streaming-indicator">
                <span class="streaming-dot"></span>
                <span class="streaming-dot"></span>
                <span class="streaming-dot"></span>
              </div>
              <div id="streaming-text" class="streaming-text"></div>
            </div>
            
            <!-- –ü–æ–ª–µ –¥–ª—è –ø—Ä—è–º–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç—É -->
            <div class="direct-message-container" id="direct-message-container">
              <input 
                type="text" 
                id="direct-message-input" 
                class="direct-message-input" 
                placeholder="–£—Ç–æ—á–Ω–∏ –æ—Ç–≤–µ—Ç, –ø–æ–ø—Ä–æ—Å–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ..." 
                data-testid="direct-message-input"
              />
              <button 
                id="btn-send-direct" 
                class="btn-send-direct" 
                title="–û—Ç–ø—Ä–∞–≤–∏—Ç—å (Enter)"
                data-testid="btn-send-direct"
              >
                –û—Ç–ø—Ä–∞–≤–∏—Ç—å
              </button>
            </div>
          </div>
        </main>

        <!-- Settings Panel -->
        <aside
          id="settings-panel"
          class="sidebar settings-panel hidden"
          data-testid="settings-panel"
        >
          <div class="sidebar-header">
            <span class="sidebar-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
            <div class="settings-mode-toggle">
              <button id="btn-basic-mode" class="mode-btn active">–û–±—ã—á–Ω—ã–µ</button>
              <button id="btn-advanced-mode" class="mode-btn">–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ</button>
            </div>
            <button id="btn-close-settings" class="btn-mini">‚úï</button>
          </div>

          <div class="sidebar-content settings-content">
            <!-- Basic Settings -->
            <div id="basic-settings" class="settings-section">
              <div class="settings-group">
                <label class="settings-label">–ü—Ä–æ–≤–∞–π–¥–µ—Ä LLM</label>
                <select id="llm-provider" class="settings-select" data-testid="llm-provider-select">
                  <option value="ollama" selected>Ollama (Local)</option>
                  <option value="openai">OpenAI</option>
                  <option value="gemini">Gemini</option>
                  <option value="claude">Claude</option>
                  <option value="openrouter">OpenRouter</option>
                  <option value="gigachat_free">GigaChat Free</option>
                  <option value="gigachat_max">GigaChat Max</option>
                </select>
              </div>

              <div id="ollama-section" class="settings-group">
                <label class="settings-label">–ú–æ–¥–µ–ª—å Ollama</label>
                <div class="input-with-button">
                  <select
                    id="ollama-model"
                    class="settings-select"
                    data-testid="ollama-model-select"
                  >
                    <option value="">–ó–∞–≥—Ä—É–∑–∫–∞...</option>
                  </select>
                  <button id="btn-refresh-models" class="btn-mini" title="–û–±–Ω–æ–≤–∏—Ç—å">‚Üª</button>
                </div>
                <div class="model-profiles">
                  <button class="profile-btn" data-profile="fast" title="–ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã">
                    Fast
                  </button>
                  <button class="profile-btn active" data-profile="balanced" title="–ë–∞–ª–∞–Ω—Å">
                    Balanced
                  </button>
                  <button class="profile-btn" data-profile="accurate" title="–¢–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã">
                    Accurate
                  </button>
                  <button class="profile-btn" data-profile="code" title="–ö–æ–¥">Code</button>
                </div>
              </div>

              <div class="settings-group">
                <label class="settings-label">–ü—Ä–æ—Ñ–∏–ª—å</label>
                <select id="ai-profile" class="settings-select" data-testid="ai-profile-select">
                  <option value="job_interview_ru" selected>–°–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ (RU)</option>
                  <option value="custom">–°–≤–æ–π –ø—Ä–æ–º–ø—Ç</option>
                </select>
              </div>

              <div
                id="custom-prompt-group"
                class="settings-group hidden"
                data-testid="custom-instructions-container"
              >
                <label class="settings-label">–°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç</label>
                <textarea
                  id="custom-instructions"
                  class="settings-textarea"
                  rows="3"
                  placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –ø—Ä–æ–º–ø—Ç..."
                ></textarea>
              </div>

              <div class="settings-group">
                <label class="settings-label">–ú–∏–∫—Ä–æ—Ñ–æ–Ω</label>
                <div class="input-with-button">
                  <select id="input-device" class="settings-select" data-testid="input-device">
                    <option value="">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</option>
                  </select>
                  <button id="btn-refresh-devices" class="btn-mini" title="–û–±–Ω–æ–≤–∏—Ç—å">‚Üª</button>
                </div>
                <div class="vu-meter" id="vu-mic">
                  <div class="vu-bar"></div>
                  <div class="vu-bar"></div>
                  <div class="vu-bar"></div>
                  <div class="vu-bar"></div>
                  <div class="vu-bar"></div>
                </div>
              </div>

              <div class="settings-group">
                <label
                  class="settings-label"
                  title="–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∫–æ–≥–¥–∞ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç—Å—è –¥–ª–∏–Ω–Ω–∞—è –ø–∞—É–∑–∞ –≤ –¥–∏–∞–ª–æ–≥–µ (–±–æ–ª–µ–µ 3 —Å–µ–∫—É–Ω–¥)"
                >
                  <input type="checkbox" id="auto-hints" data-testid="auto-hints-checkbox" />
                  –ê–≤—Ç–æ-–ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø—Ä–∏ –ø–∞—É–∑–µ –≤ —Ä–µ—á–∏
                  <span
                    class="help-icon"
                    title="–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∫–æ–≥–¥–∞ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç—Å—è –¥–ª–∏–Ω–Ω–∞—è –ø–∞—É–∑–∞ –≤ –¥–∏–∞–ª–æ–≥–µ (–±–æ–ª–µ–µ 3 —Å–µ–∫—É–Ω–¥)"
                    >?</span
                  >
                </label>
              </div>

              <div class="settings-group">
                <label class="settings-label">–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –æ–∫–Ω–∞</label>
                <div class="range-with-value">
                  <input
                    type="range"
                    id="opacity-slider"
                    min="20"
                    max="100"
                    value="100"
                    data-testid="opacity-slider"
                  />
                  <span id="opacity-value">100%</span>
                </div>
              </div>
            </div>

            <!-- Advanced Settings -->
            <div id="advanced-settings" class="settings-section hidden">
              <div class="settings-group">
                <label class="settings-label">–°–∏—Å—Ç–µ–º–Ω—ã–π –∑–≤—É–∫ (Loopback)</label>
                <select id="loopback-device" class="settings-select" data-testid="loopback-device">
                  <option value="">–ê–≤—Ç–æ (Loopback)</option>
                </select>
              </div>

              <div class="settings-group">
                <label class="settings-label">
                  <input type="checkbox" id="dual-audio" data-testid="dual-audio" />
                  Dual Audio (–º–∏–∫—Ä–æ—Ñ–æ–Ω + —Å–∏—Å—Ç–µ–º–Ω—ã–π)
                </label>
              </div>

              <div class="settings-group">
                <label class="settings-label"
                  >–†–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞: <span id="context-window-size-value">20</span></label
                >
                <input
                  type="range"
                  id="context-window-size"
                  min="5"
                  max="30"
                  value="20"
                  data-testid="context-window-size"
                />
              </div>

              <div class="settings-group">
                <label class="settings-label"
                  >–ú–∞–∫—Å. —Ç–æ–∫–µ–Ω–æ–≤: <span id="max-tokens-value">500</span></label
                >
                <input
                  type="range"
                  id="max-tokens"
                  min="100"
                  max="2000"
                  step="100"
                  value="500"
                  data-testid="max-tokens"
                />
              </div>

              <div class="settings-group">
                <label class="settings-label"
                  >–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: <span id="temperature-value">0.7</span></label
                >
                <input
                  type="range"
                  id="temperature"
                  min="0"
                  max="20"
                  value="7"
                  data-testid="temperature"
                />
              </div>

              <div class="settings-group">
                <label class="settings-label">Stealth —Ä–µ–∂–∏–º</label>
                <div class="toggle-row">
                  <label class="toggle-switch">
                    <input type="checkbox" id="stealth-toggle" data-testid="stealth-toggle" />
                    <span class="toggle-slider"></span>
                  </label>
                  <select
                    id="stealth-strategy"
                    class="settings-select settings-select-sm"
                    data-testid="stealth-strategy"
                  >
                    <option value="tray">System Tray</option>
                    <option value="second-monitor">–í—Ç–æ—Ä–æ–π –º–æ–Ω–∏—Ç–æ—Ä</option>
                  </select>
                </div>
              </div>

              <div class="settings-group">
                <label class="settings-label">
                  <input type="checkbox" id="vision-enabled" data-testid="vision-enabled" />
                  Vision AI (–∞–Ω–∞–ª–∏–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤)
                </label>
              </div>

              <div class="settings-group">
                <label class="settings-label">
                  <input type="checkbox" id="remote-mode" data-testid="remote-mode" />
                  –£–¥–∞–ª—ë–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã
                </label>
              </div>

              <div id="remote-config" class="settings-group hidden">
                <div class="settings-subgroup">
                  <label class="settings-label-sm">STT Server</label>
                  <input
                    type="text"
                    id="remote-stt-url"
                    class="settings-input"
                    placeholder="ws://192.168.1.100:8765"
                    value="ws://localhost:8765"
                  />
                </div>
                <div class="settings-subgroup">
                  <label class="settings-label-sm">LLM Server</label>
                  <input
                    type="text"
                    id="remote-llm-url"
                    class="settings-input"
                    placeholder="http://192.168.1.100:8766"
                    value="http://localhost:8766"
                  />
                </div>
                <button id="btn-test-remote" class="btn-secondary btn-full">
                  –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
                </button>
              </div>

              <div class="settings-group">
                <label class="settings-label">
                  <input type="checkbox" id="debug-mode" data-testid="debug-mode" />
                  –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
                </label>
              </div>

              <div class="settings-actions">
                <button id="btn-health-check" class="btn-secondary">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ</button>
                <button id="btn-reset-settings" class="btn-danger">–°–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
              </div>
            </div>
          </div>
        </aside>
      </div>

      <!-- Modals -->
      <!-- History Modal -->
      <div id="history-modal" class="modal-overlay hidden" data-testid="history-modal">
        <div class="modal-container modal-lg">
          <div class="modal-header">
            <h2 class="modal-title">–ò—Å—Ç–æ—Ä–∏—è —Å–µ—Å—Å–∏–π</h2>
            <button id="btn-close-history" class="btn-close" data-testid="btn-close-modal">
              ‚úï
            </button>
          </div>
          <div class="modal-body">
            <div id="sessions-list" class="sessions-list" data-testid="sessions-list">
              <div class="empty-state">
                <span class="empty-icon">üìã</span>
                <p>–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π</p>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button id="btn-export-sessions" class="btn-secondary">–≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö</button>
            <button id="btn-import-sessions" class="btn-secondary">–ò–º–ø–æ—Ä—Ç</button>
            <input type="file" id="import-file-input" accept=".json" hidden />
          </div>
        </div>
      </div>

      <!-- Session View Modal -->
      <div id="session-view-modal" class="modal-overlay hidden" data-testid="session-view-modal">
        <div class="modal-container modal-xl">
          <div class="modal-header">
            <h2 id="session-view-title" class="modal-title">–°–µ—Å—Å–∏—è</h2>
            <button id="btn-close-session-view" class="btn-close">‚úï</button>
          </div>
          <div class="modal-body session-view-body">
            <div class="session-section">
              <h3>–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç</h3>
              <div
                id="session-transcript"
                class="session-content"
                data-testid="session-transcript"
              ></div>
            </div>
            <div class="session-section">
              <h3>–ü–æ–¥—Å–∫–∞–∑–∫–∏</h3>
              <div id="session-hints" class="session-content" data-testid="session-hints"></div>
            </div>
          </div>
          <div class="modal-footer">
            <button id="btn-export-session" class="btn-secondary">–≠–∫—Å–ø–æ—Ä—Ç</button>
            <button id="btn-delete-session" class="btn-danger">–£–¥–∞–ª–∏—Ç—å</button>
          </div>
        </div>
      </div>

      <!-- Help Modal -->
      <div id="help-modal" class="modal-overlay hidden" data-testid="help-modal">
        <div class="modal-container">
          <div class="modal-header">
            <h2 class="modal-title">–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏</h2>
            <button id="btn-close-help" class="btn-close">‚úï</button>
          </div>
          <div class="modal-body">
            <div class="shortcuts-list">
              <div class="shortcut-item">
                <span class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>Enter</kbd></span>
                <span class="shortcut-desc">–ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É</span>
              </div>
              <div class="shortcut-item">
                <span class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>S</kbd></span>
                <span class="shortcut-desc">–°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç</span>
              </div>
              <div class="shortcut-item">
                <span class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>T</kbd></span>
                <span class="shortcut-desc">–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç</span>
              </div>
              <div class="shortcut-item">
                <span class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>[</kbd></span>
                <span class="shortcut-desc">–ü—Ä–µ–¥—ã–¥—É—â–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞</span>
              </div>
              <div class="shortcut-item">
                <span class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>]</kbd></span>
                <span class="shortcut-desc">–°–ª–µ–¥—É—é—â–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞</span>
              </div>
              <div class="shortcut-item">
                <span class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>,</kbd></span>
                <span class="shortcut-desc">–û—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</span>
              </div>
              <div class="shortcut-item">
                <span class="shortcut-keys"><kbd>Ctrl</kbd> + <kbd>H</kbd></span>
                <span class="shortcut-desc">Stealth —Ä–µ–∂–∏–º</span>
              </div>
              <div class="shortcut-item">
                <span class="shortcut-keys"><kbd>F1</kbd></span>
                <span class="shortcut-desc">–°–ø—Ä–∞–≤–∫–∞</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Vision Modal -->
      <div id="vision-modal" class="modal-overlay hidden" data-testid="vision-modal">
        <div class="modal-container modal-lg">
          <div class="modal-header">
            <h2 class="modal-title">Vision AI</h2>
            <button id="btn-close-vision" class="btn-close">‚úï</button>
          </div>
          <div class="modal-body">
            <div class="vision-options" id="vision-options">
              <button id="btn-capture-fullscreen" class="vision-option-btn">
                <span class="option-icon">üñ•Ô∏è</span>
                <span>–í–µ—Å—å —ç–∫—Ä–∞–Ω</span>
              </button>
              <button id="btn-capture-window" class="vision-option-btn">
                <span class="option-icon">ü™ü</span>
                <span>–ê–∫—Ç–∏–≤–Ω–æ–µ –æ–∫–Ω–æ</span>
              </button>
              <button id="btn-capture-region" class="vision-option-btn">
                <span class="option-icon">‚úÇÔ∏è</span>
                <span>–í—ã–¥–µ–ª–∏—Ç—å –æ–±–ª–∞—Å—Ç—å</span>
              </button>
            </div>
            <div id="vision-preview" class="vision-preview hidden">
              <img id="vision-preview-img" class="vision-preview-img" alt="–ü—Ä–µ–≤—å—é —Å–∫—Ä–∏–Ω—à–æ—Ç–∞" />
              <div class="vision-preview-actions">
                <button id="btn-vision-analyze" class="btn-primary">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
                <button id="btn-vision-retake" class="btn-secondary">–ü–µ—Ä–µ—Å–Ω—è—Ç—å</button>
                <button id="btn-vision-cancel" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
              </div>
            </div>
            <div id="vision-result" class="vision-result hidden">
              <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞:</h3>
              <div id="vision-analysis-text" class="vision-analysis-text"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Toast Notifications -->
      <div id="toast-container" class="toast-container">
        <div id="error-toast" class="toast toast-error hidden" data-testid="error-toast">
          <span class="toast-icon">‚ö†Ô∏è</span>
          <span id="error-message" class="toast-message"></span>
          <button id="btn-dismiss-error" class="toast-dismiss">‚úï</button>
        </div>
        <div id="success-toast" class="toast toast-success hidden">
          <span class="toast-icon">‚úì</span>
          <span id="success-message" class="toast-message"></span>
        </div>
      </div>

      <!-- Debug Panel -->
      <div id="debug-panel" class="debug-panel hidden" data-testid="debug-panel">
        <span>STT: <span id="metrics-stt-latency">-</span>ms</span>
        <span>LLM: <span id="metrics-llm-latency">-</span>ms</span>
      </div>
    </div>

    <script type="module" src="app.js"></script>
  </body>
</html>
