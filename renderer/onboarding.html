<!DOCTYPE html>
<html lang="ru" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; connect-src 'self' ws://localhost:8765 ws://localhost:8764 http://localhost:8766">
  <title>Live Hints — Настройка</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="onboarding.css">
</head>
<body>
  <div id="onboarding-app">
    <!-- Background Particles -->
    <div class="particles" id="particles"></div>

    <!-- Header -->
    <header class="onboarding-header">
      <div class="logo">
        <div class="logo-mark">LH</div>
        <span class="logo-text">Live Hints</span>
      </div>
      <div class="window-controls">
        <button id="btn-minimize" class="window-btn" title="Свернуть">−</button>
        <button id="btn-close" class="window-btn window-btn-close" title="Закрыть">×</button>
      </div>
    </header>

    <!-- Progress Indicator -->
    <div class="progress-container">
      <div class="progress-orbit">
        <div class="orbit-node active" data-step="1">
          <div class="node-core">1</div>
          <span class="node-label">Сценарий</span>
        </div>
        <div class="orbit-node" data-step="2">
          <div class="node-core">2</div>
          <span class="node-label">Резюме</span>
        </div>
        <div class="orbit-node" data-step="3">
          <div class="node-core">3</div>
          <span class="node-label">Вакансия</span>
        </div>
        <div class="orbit-node" data-step="4">
          <div class="node-core">4</div>
          <span class="node-label">Аудио</span>
        </div>
      </div>
    </div>

    <!-- Step Content -->
    <main class="step-container">
      <!-- Step 1: Mode Selection -->
      <div class="step-content active" data-step="1">
        <div class="step-header">
          <div class="step-badge">Шаг 1 из 4</div>
          <h2 class="step-title">Выберите сценарий использования</h2>
          <p class="step-subtitle">AI адаптирует стиль подсказок под вашу ситуацию</p>
        </div>
        
        <div class="mode-grid" id="mode-grid">
          <div class="mode-card selected" data-mode="job_interview_ru">
            <div class="card-icon">◈</div>
            <div class="card-title">Собеседование</div>
            <div class="card-desc">Технические вопросы и ответы по вашему опыту</div>
            <div class="card-check">✓</div>
          </div>
          
          <div class="mode-card" data-mode="business_meeting">
            <div class="card-icon">◆</div>
            <div class="card-title">Переговоры</div>
            <div class="card-desc">Аргументы и контраргументы для бизнес-встреч</div>
            <div class="card-check">✓</div>
          </div>
          
          <div class="mode-card" data-mode="daily_sync">
            <div class="card-icon">◉</div>
            <div class="card-title">Созвоны</div>
            <div class="card-desc">Краткие статусы и обсуждение задач</div>
            <div class="card-check">✓</div>
          </div>
          
          <div class="mode-card" data-mode="presentation">
            <div class="card-icon">★</div>
            <div class="card-title">Презентация</div>
            <div class="card-desc">Убедительные питчи и демонстрации</div>
            <div class="card-check">✓</div>
          </div>
          
          <div class="mode-card" data-mode="custom">
            <div class="card-icon">◎</div>
            <div class="card-title">Свой сценарий</div>
            <div class="card-desc">Полностью кастомные инструкции</div>
            <div class="card-check">✓</div>
          </div>
        </div>

        <div class="mode-context hidden" id="mode-context-area">
          <textarea 
            id="mode-context" 
            class="form-textarea" 
            rows="4"
            placeholder="Дополнительный контекст: проект, роль, команда..."></textarea>
        </div>
      </div>

      <!-- Step 2: Resume -->
      <div class="step-content" data-step="2">
        <div class="step-header">
          <div class="step-badge">Шаг 2 из 4</div>
          <h2 class="step-title">Загрузите резюме</h2>
          <p class="step-subtitle">AI будет опираться на ваш реальный опыт при формулировке ответов</p>
        </div>

        <div class="upload-zone" id="resume-upload">
          <div class="upload-icon-main">↗</div>
          <div class="upload-title">Перетащите файл или кликните для выбора</div>
          <div class="upload-hint">PDF, DOCX, TXT — до 10MB</div>
          <input type="file" id="resume-input" accept=".txt,.pdf,.docx" hidden>
        </div>

        <div class="file-result hidden" id="resume-result">
          <div class="file-info-card">
            <div class="file-icon">◈</div>
            <div class="file-meta">
              <span class="file-name" id="resume-filename">resume.pdf</span>
              <span class="file-size" id="resume-filesize">2.4 MB</span>
            </div>
            <button class="file-replace" id="resume-replace" title="Заменить файл">↻</button>
            <button class="file-remove" id="resume-remove" title="Удалить">×</button>
          </div>
        </div>

        <div class="text-toggle">
          <button class="btn-text" id="toggle-resume-text">Или вставить текст вручную</button>
        </div>

        <div class="text-area hidden" id="resume-text-area">
          <textarea class="form-textarea" rows="8" placeholder="Вставьте текст резюме..."></textarea>
        </div>
      </div>

      <!-- Step 3: Vacancy -->
      <div class="step-content" data-step="3">
        <div class="step-header">
          <div class="step-badge">Шаг 3 из 4</div>
          <h2 class="step-title">Описание вакансии</h2>
          <p class="step-subtitle">AI подстроит акценты под требования позиции</p>
        </div>

        <div class="upload-zone" id="vacancy-upload">
          <div class="upload-icon-main">☁</div>
          <div class="upload-title">Загрузите описание вакансии</div>
          <div class="upload-hint">PDF, TXT — или пропустите этот шаг</div>
          <input type="file" id="vacancy-input" accept=".txt,.pdf" hidden>
        </div>

        <div class="file-result hidden" id="vacancy-result">
          <div class="file-info-card">
            <div class="file-icon">◈</div>
            <div class="file-meta">
              <span class="file-name" id="vacancy-filename">vacancy.pdf</span>
              <span class="file-size" id="vacancy-filesize">1.2 MB</span>
            </div>
            <button class="file-replace" id="vacancy-replace" title="Заменить файл">↻</button>
            <button class="file-remove" id="vacancy-remove" title="Удалить">×</button>
          </div>
        </div>

        <div class="text-toggle">
          <button class="btn-text" id="toggle-vacancy-text">Вставить текст вручную</button>
        </div>

        <div class="text-area hidden" id="vacancy-text-area">
          <textarea class="form-textarea" rows="8" placeholder="Вставьте описание вакансии..."></textarea>
        </div>
      </div>

      <!-- Step 4: Audio -->
      <div class="step-content" data-step="4">
        <div class="step-header">
          <div class="step-badge">Шаг 4 из 4</div>
          <h2 class="step-title">Настройка захвата аудио</h2>
          <p class="step-subtitle">Проверьте микрофон перед началом сессии</p>
        </div>

        <div class="audio-visualizer" id="audio-viz">
          <div class="wave-bar" style="height: 20%"></div>
          <div class="wave-bar" style="height: 40%"></div>
          <div class="wave-bar" style="height: 60%"></div>
          <div class="wave-bar" style="height: 80%"></div>
          <div class="wave-bar" style="height: 100%"></div>
          <div class="wave-bar" style="height: 80%"></div>
          <div class="wave-bar" style="height: 60%"></div>
          <div class="wave-bar" style="height: 40%"></div>
          <div class="wave-bar" style="height: 20%"></div>
          <div class="wave-bar" style="height: 35%"></div>
          <div class="wave-bar" style="height: 55%"></div>
          <div class="wave-bar" style="height: 75%"></div>
          <div class="wave-bar" style="height: 90%"></div>
          <div class="wave-bar" style="height: 65%"></div>
          <div class="wave-bar" style="height: 45%"></div>
          <div class="wave-bar" style="height: 25%"></div>
        </div>

        <div class="audio-controls">
          <select class="form-select" id="mic-select">
            <option value="">Выберите микрофон...</option>
          </select>
          
          <button class="btn btn-primary" id="btn-test-mic">
            <span class="btn-icon">◉</span>
            Тест микрофона
          </button>
        </div>

        <label class="checkbox-modern">
          <input type="checkbox" id="dual-audio">
          <span class="check-label">
            <strong>Dual Audio Mode <span class="tooltip-icon">?</span></strong>
            <span>Раздельный захват микрофона и системного звука</span>
          </span>
        </label>
      </div>
    </main>

    <!-- Footer -->
    <footer class="onboarding-footer">
      <button id="btn-back" class="btn btn-ghost">
        ← Назад
      </button>
      
      <span class="step-counter">
        <span id="current-step">1</span> / 4
      </span>
      
      <div class="footer-actions">
        <button id="btn-next" class="btn btn-primary">
          Далее →
        </button>
        <button id="btn-finish" class="btn btn-success hidden">
          Запустить сессию ✓
        </button>
      </div>
    </footer>
  </div>

  <script type="module" src="onboarding.js"></script>
</body>
</html>
